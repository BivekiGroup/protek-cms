Упрощение формы добавления юрлица - скрытие 3 секций после автозаполнения по ИНН, кнопка "Редактировать вручную" для детальной правки - 20
Исправление ошибки добавления товара в корзину - приведение deliveryTime к строке через String() в ProductPriceHeader, добавление toast уведомлений с названием товара - 5
Улучшение валидации API загрузки цен из 1С - добавлена проверка на пустой SKU после нормализации, более понятные сообщения об ошибках - 10
Добавление полей габаритов в API каталога 1С - добавление полей depth (длина), width (ширина), height (высота) в Prisma схему Product, обновление Zod валидации в /api/1c/catalog/products, обработка новых полей в логике создания/обновления товаров, обновление документации на странице интеграции 1C - 15
Исправление отображения иерархии категорий при редактировании товара - добавление рекурсивных функций findCategoriesById и flattenCategories для корректного поиска категорий в дереве, обновление селектора категорий для показа полной иерархии с отступами, теперь категории товара отображаются корректно независимо от уровня вложенности - 10
Добавление блока авторизации для неавторизованных пользователей в корзине - интеграция компонента UnauthenticatedCart с проверкой токена через localStorage, отображение блока "ТОЛЬКО ДЛЯ ЮРЛИЦ" с кнопкой входа и итогами заказа для пользователей с товарами в корзине (правая колонка), создание элегантной карточки с иконкой пользователя, заголовком "Вход для юридических лиц", описанием и кнопкой "Войти в систему" в empty state пустой корзины (светлый градиентный фон, красная рамка, круглая иконка с градиентом), добавление полных CSS стилей для компонента (темный градиентный блок с радиальным красным градиентом для правой колонки, итоги заказа, disabled кнопка оформления, чекбокс согласия) - ОТКАЧЕНО (восстановлено из git) - 35
Исправление определения типа профиля клиента - если у клиента есть хотя бы одно юридическое лицо в legalEntities, общий статус "Тип профиля" показывает "Юр. лицо" вместо "Физ. лицо" - добавлено поле legalEntities (id, shortName, fullName) в GraphQL запрос GET_CLIENTS, обновлен интерфейс Client с добавлением массива legalEntities, переработана функция getClientTypeLabel для проверки наличия юр.лиц перед определением типа, обновлен вызов функции с передачей всего объекта клиента вместо только типа, исправлена ошибка GraphQL "Cannot return null for non-nullable field Client.legalEntities" - добавлен include legalEntities во все resolver'ы возвращающие клиента (clients, client, clientMe, createClient, updateClient, confirmClient), добавлена нормализация данных для гарантии что legalEntities всегда массив а не null, исправлена страница карточки клиента - удален селектор типа пользователя (теперь только для чтения с автоопределением по наличию юр.лиц), удалены устаревшие поля юр.лица из формы общих настроек (ИНН, КПП, ОГРН и т.д.), обновлен заголовок страницы клиента для корректного отображения типа на основе legalEntities, добавлена подсказка показывающая количество юр.лиц - 30
Изменение порядка колонок цен в каталоге товаров - поменяны местами колонки "Цена сайт" и "Цена опт" в таблице ProductList, теперь порядок: Остаток → Цена сайт → Цена опт → Сайт, обновлены заголовки таблицы и ячейки данных - 5
Реорганизация таблицы клиентов - изменена структура колонок (Номер → Тип профиля (ИП/ООО) → ИНН → Наценка → Контактное лицо → Телефон → Email → Дата рег → Статус → Действия), добавлены функции getClientProfileType (определяет ИП или ООО по shortName первого юр.лица) и getClientINN (берет ИНН из первого юр.лица или основного клиента), вся строка таблицы теперь кликабельна с hover эффектом, убрано выпадающее меню с кнопкой редактирования (три точки), убрано синее выделение имени клиента, добавлен stopPropagation для кнопки "Войти от имени", добавлено поле inn в GraphQL запрос legalEntities, обновлен интерфейс Client с полем inn в legalEntities - 20
Добавление модалки подтверждения клиента на дашборде - при клике на неподтвержденного клиента открывается модалка с подтверждением и отправкой письма, при клике на подтвержденного клиента открывается страница редактирования, добавлена мутация CONFIRM_CLIENT, добавлены state (confirmDialogOpen, selectedClient) и функции handleClientClick и handleConfirmClient, карточки клиентов стали кликабельными с cursor-pointer, модалка показывает имя клиента и email для отправки уведомления, toast уведомления об успехе/ошибке, refetch списка клиентов после подтверждения - 25
Оптимизация отображения товаров в корзине - уменьшены отступы (padding: 12px 16px, marginBottom: 8px), удалено дублирование названия товара (убрано описание description, название показывается один раз после бренда/артикула), уменьшены размеры элементов для компактности как в результатах поиска (чекбокс 18px, иконки 18px, кнопки счетчика 24px, шрифты уменьшены на 1-3px), переставлен порядок: сначала бренд/артикул серым текстом 13px, затем название товара 14px жирным, размер цены уменьшен до 17px, border-radius уменьшен до 12px для карточек и 6px для элементов управления - 15
Добавление индикатора количества товара в корзине на странице поиска - заменена зеленая галочка на красный бейдж с числом, показывающий сколько единиц товара уже лежит в корзине, бейдж появляется в правом верхнем углу кнопки "В корзину" для каждого предложения, использует функцию getExistingCartQuantity для подсчета количества, стили: красный фон (#dc2626), белый текст, круглая форма (minWidth: 20px, height: 20px), шрифт 11px жирный, тень для лучшей видимости, tooltip показывает "В корзине: X шт." - 10
Оптимизация размеров сайдбаров и таблицы в каталоге товаров - уменьшен левый сайдбар категорий с w-80 (320px) до w-56 (224px), уменьшен заголовок "Каталог товаров" до "Каталог" (text-base), кнопка "Добавить категорию" стала компактнее (size="sm"), в CategoryTree уменьшены отступы: paddingLeft с level*16+12 до level*12+8, размеры элементов: py-2 -> py-1.5, text-sm -> text-xs, иконки с w-3 h-3 до w-2.5 h-2.5, счетчик товаров text-xs -> text-[10px], оптимизирован grid таблицы ProductList для предотвращения наложения колонок: уменьшены минимальные размеры колонок, увеличен gap с gap-1 до gap-1.5, установлены более разумные minmax значения для каждой колонки, дополнительная оптимизация таблицы - дальнейшее уменьшение всех колонок (чекбокс 26px, внутр.код 55-70px, фото 42-56px, название 110px-1fr, категория 90-180px, артикул 60-80px, остаток 48-65px, цены 55-75px, сайт 42-52px, действия 60-75px), уменьшен gap с 1.5 до 1, уменьшены padding в заголовке (px-2.5 -> px-2) и шрифты (11px -> 10.5px в заголовке, 11.5px -> 11px в строках), уменьшен padding в колонке действий (pr-4 -> pr-2, pr-1.5 -> pr-1), уменьшены кнопки действий (h-8 w-8 -> h-7 w-7, иконки w-4 h-4 -> w-3.5 h-3.5), уменьшен gap между кнопками (gap-1 -> gap-0.5) - 25
